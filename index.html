<!DOCTYPE html>
<html>
  <head>
    <title>Kodołamacz Robocode</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
    <!--http://www.google.com/fonts -->
      @font-face{
        font-family: 'Droid Serif';
        src: url('fonts/DroidSerif.ttf');
      }
      
      @font-face{
        font-family: 'Droid Serif';
        src: url('fonts/DroidSerif-Bold.ttf');
        font-weight: bold;
      }

      @font-face{
        font-family: 'Droid Serif';
        src: url('fonts/DroidSerif-Italic.ttf');
        font-style: italic;
      }

      @font-face{
        font-family: 'Droid Serif';
        src: url('fonts/DroidSerif-BoldItalic.ttf');
        font-weight: bold;
        font-style: italic;
      }      
      
      @font-face{
        font-family: 'Ubuntu Mono';
        src: url('fonts/UbuntuMono-Regular.ttf');
      }    
      
      @font-face{
        font-family: 'Ubuntu Mono';
        src: url('fonts/UbuntuMono-Bold.ttf');
        font-weight: bold;
      }

      @font-face{
        font-family: 'Ubuntu Mono';
        src: url('fonts/UbuntuMono-Italic.ttf');
        font-style: italic;
      }

      @font-face{
        font-family: 'Ubuntu Mono';
        src: url('fonts/UbuntuMono-BoldItalic.ttf');
        font-weight: bold;
        font-style: italic;
      }          
      
      body { font-family: 'Droid Serif'; } 	  
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }  
      
    </style>
	<link rel="stylesheet" href="mermaid.css">
	<!-- /* Slideshow styles */ -->
	<link rel="stylesheet" type="text/css" href="css/styles.css">	

  </head>
  <body>
    <textarea id="source">
background-image: url(img/kl-title43.png)
class: title-slaid, center, middle
<br/><br/>
#.center[Java wars  
Robocode]
<br/>
##.right[Build the best, destroy the rest!]
<br/>
_.right.tt[k.koziol@sages.com.pl]_
.left[![:scale 10%](img/sages.png)]

---
layout:true
class: slaid
background-image: url(img/kl-slaid43.png)

---
class: middle
# Jak będzie przebiegał warsztat
.big[
- Poznajmy się
- Wprowadzenie teoretyczne
- Zakodujmy coś wreście - czyli warsztat właściwy ;) 
- Kodowania ciąg dalszy
- Zawody - jak starczy czasu ;)
- Zakończenie
]

---
#To i owo o Prowadzącym...
##mgr inż. Krzysztof Kozioł
.left-column64[
- Ponad 20 lat w zawodzie
- Głównie praca z Java, Orcale i PL/SQL
- Trener w Sages zaangażowany w
  - http://stacja.it
  - http://kodolamacz.pl
- Współorganizator konferencji Confitura
  - http://confitura.pl
  - [kanał YT](https://www.youtube.com/channel/UCkVjQGf_e0JmlonPMS4VNXQ)
- Zaangażowany w WJUG 
  - http://warszawa.jug.pl
  - http://jinkubator.pl
  - [kanał YT](https://www.youtube.com/channel/UC2coGyxf5x_CzJ3l4F-N-Sw)
- LinkedIn https://pl.linkedin.com/in/krzysiekkoziol
- te slajdy: http://kkoziol.github.io 
]
.right-column64[
.right[![:scale 71%](img/kkoziol2.jpg)]
]

.right[
![:scale 15%](img/confitura.jpg)
![:scale 15%](img/wjug.jpg)]

---
class: top

# Zasady warsztatu
.big[
- Mówimy sobie po imieniu
- Wyciszamy komórki
- Zadajemy pytania ;)
- Prosimy o pomoc jeżeli zagubilismy się  
	lub zostaliśmy w tyle
- Pomagamy sobie na wzajem
- Nie hałasujemy, nie przeszkadzamy innym
]

---
class: top

# Cele warsztatu
.big[
- Główny
  - ćwiczenie wzorca Strategia
  - ćwiczenie wzorca Stan
  - poznanie technik refaktoryzacji
- Dalszy
  - dobra zabawa! :)
  - stworzenie robota "kilera"
  - twój własny tajny cel ;)
]  
---
layout:false
background-image: url(img/kl-title43.png)
class: title-slaid, center, middle
<br/><br/><br/><br/>
#.center[![:scale 60%](img/robocode_logo_tanks.jpg)]
<br/>
##.right[Co to jest?]
<br/>
.left[![:scale 10%](img/sages.png)]

---
layout:true
class: slaid
background-image: url(img/kl-slaid43.png)

---
class: top
## Robocode - czyli?
.big[
- Robocode to łatwy w użyciu symulator pola walki napisany w Javie
]
--
.big[
- Tworzysz robota który jest wrzucany na pole walki i dalej już radzi sobie sam
]
--
.big[
- Roboty, oczywiście pisze się w Javie
]
--
.big[
- Można dość prosto stworzyć skutecznie działającego robota, JuniorRobot, Robot, AdvancedRobot
]
--
.big[
- Jest to też dobra platforma do nauki AI i Machine learning
]

---
class: top
## Robocode - historia
.big[
Robocode to "dziecko" Mathew Nelsona, inżyniera z działu Internet Advanced Technologyies firmy IBM. 

http://robocode.sourceforge.net/  

http://robowiki.net/wiki/Main_Page  

Początki platformy sięgaja 2001 roku.
]

---
class: top

## Anatomia - robota

- Body - porusza się w przód/tył i skręty prawo lewo
- Gun - strzela pociskami i może obracać się w prawo albo lewo
- Radar - wykrywa przeciwników, może sie obracac w prawo albo lewo, niezależnie od działa.

.center[![:scale 50%](img/robot-anatomy.jpg)]

---
class: top

## Fizyka gry - koordynaty i kierunki

- Koordynaty
  - system kartezjański, (0,0) znajduje się w lewym dolnym rogu
- Kąty i obroty
  - przyjeto konwencję zgodną z ruchem wskazówek zegara, 0/360 stopni to północ
- Rozmiar robota
 - 36x36 pixeli, trochę mniejszy niż animowany obrazek
 - ten kwadrat się nie obraca! (nie zależnie od zwrotu robota) 

.center[![:scale 57%](img/field-cords.gif)]

---
class: top

## Fizyka gry - koordynaty i kierunki

.center[![:scale 90%](img/AbsoluteRelativeAngles.png)]

---
class: top

## Fizyka gry - Czas i odległości
.big[
- Czas
  - Jedna jednostka czasu jest zwana tikiem
  - 1 tik = 1 tura
- Odległości
  - Generalnie jedna jednostka odległości to 1 pixel
  - Pole gry jest jednak skalowane do ekranu i wygladać może to trochę inaczej
  - do pomiaru odległosci używane sa "double" więc można wykonywać ruchy o części pixela ;)
]

---
class: top

## Fizyka gry - Ruch
.big[
- Przyspieszenie (a) (acceleration)
  - Robot może przyspieszać 1 pixel/turę
  - Robot może zwalniać 2 pixele/turę
  - O te wartości dba sam symulator
- Prędkość (v) (velocity)
  - v=a*t,
  - Maksymalna prędkość robota to 8 pixeli/turę
  - zwrot (heading) kierunek w którym porusza sie robot
- Odległość (d) (distance)
  - d = v*t  
]
---
class: top

## Fizyka gry - obroty
.big[
- rotacja podstawy
  - Maksymalny skręt = (10 - 0.75 * abs(v)) deg/tura
  - Krótko mówiąc im szybciej jedziesz tym wolniej skrecasz
- rotacja działa
  - Maksymalny skręt = 20 deg/ ture
  - Ta wielkość dodaje sie do aktualnego skrętu podstawy!
- rotacja radaru
  - Maksymalny skręt = 45 deg/ ture
  - Ta wielkość dodaje sie do aktualnego skrętu działa!
]
---
class: top

## Fizyka gry - pociski

- Zniszczenia (ubytek energi)
  - 4*energia strału
  - Jeżeli energia strzału > 1 to trafienie generuje dodatkowe zniszczenia = 2*(energia - 1)
  - 4 * bullet power + 2 * max(bullet power - 1 , 0)
- Predkość pocisku
  - 20 - 3 * energia strzału
  - prędkość robota nie dodaje się do prędkości pocisku
  - pocisk nie ma zasięgu...?
- Temperatura działa
  - 1 + energia strzału / 5
  - Nie można strzelać gdy działo jest nie ostygnięte
  - Na początku bitwy wszystkie działa są gorące
  - Prędkość stygnięcia = 0.1/ tura  (po pocisku siły 3 - 16 tur)
- Zysk energi za trafienie
  - 3 * energia strzału

---
class: top

## Fizyka gry - kolizje
.big[
- z innym robotem
  - Każdy robot otrzymuje uszkodzenia w wysokości 0.6.
  - Jeżeli robot poruszał się "od kolizji" nie zostanie zatrzymany
- ze scianami  
  - Zaawansowane roboty otrzymują = abs(V)*0.5-1 (ale nigdy mniej niż 0)
  - Zwykłe roboty i juniorRoboty nie otrzymuja zniszczeń od ścian
]

---
class: top

## Fizyka gry - pętla

1. Pole bitwy jest odrysowywane
1. Wszystkie roboty wykonuja swój kod, aż do momentu kiedy podejmą akcje (wtedy są pauzowane)
1. Czas zostaje uaktualniony (t++)
1. Wszystkie pociski są przemieszczane (także te dopiero co wystrzelone) i sprawdzane sa ewentualne kolizje.
1. Wszystkie roboty sa przemieszczane i aktualizowane w takiej kolejności(działo, radar, zwrot, przyspieszenie, prędkość, odległość)
1. Wszystkie roboty dokonują skanowania (radar) (i ewentualnie otrzymuja wiadomości zespołowe)
1. Wszystkie roboty są wznawiane.
1. Każdy robot procesuje swoją kolejkę zdarzeń

---
class: top

## Architektura symulatora

.center[![:scale 90%](img/Robo-code-arch.gif)]

---
class: top

## Punktacja

http://robowiki.net/wiki/Robocode/Scoring
  
---
layout:false
background-image: url(img/kl-title43.png)
class: title-slaid, center, middle
<br/><br/><br/><br/>
#.center[Symulator]
<br/><br/>
##.right[Setup środowiska]
<br/><br/><br/><br/>
.left[![:scale 10%](img/sages.png)]

---
layout:true
class: slaid
background-image: url(img/kl-slaid43.png)

---
class: top
## Setup
.big[
- instalacja javy
- instalacja eclipse
- instalacja git(?)
- instalacja robocode
]

---
layout:true
class: slaid
background-image: url(img/kl-slaid43.png)

---
# Środowisko pracy

### Tworzymy katalogi
- C:\Java
- C:\Java\eclipse
- C:\Java\wrsp_KiK

### Instalacja Javy JDK
- Oracle Java JDK 1.8.121 - Odpalamy po prostu instaler

### Instalacja Eclipse
- rozpakowyjemy ZIPa do katalogu C:\Java\eclipse

---
class: top
## Setup
.big[
### Instalacja robocode
  - [link do pobrania](https://sourceforge.net/projects/robocode/files/) 
  - [Create_a_Project](http://robowiki.net/wiki/Robocode/Eclipse/Create_a_Project)
  - [Running_from_Eclipse](http://robowiki.net/wiki/Robocode/Eclipse/Running_from_Eclipse)
  - [Add_a_Robot_Project](http://robowiki.net/wiki/Robocode/Add_a_Robot_Project)
  - [Debugging_Robot](http://robowiki.net/wiki/Robocode/Eclipse/Debugging_Robot)
  
### Pierwszy robot
[My_First_Robot](http://robowiki.net/wiki/Robocode/My_First_Robot)  
]


---
# Cel #01 - SittingDuck 

<br/>
.big[
- http://robowiki.net/wiki/SittingDuck
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/SittingDuck_8java-source.html)

W zasadzie nic nie robi...  
wystarczy tylko wycelować i strzelić

]

---
# Cel #02 - Target 

<br/>
.big[
- http://robowiki.net/wiki/Target
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/Target_8java-source.html)

ten ucieka...  
więc wycelować strzelić i znowu wycelować
]

???
nauczymy sie
```
            setBodyColor(Color.white);
            setGunColor(Color.white);
            setRadarColor(Color.white);
            setScanColor(Color.pink);
            setBulletColor(Color.pink);
                        
           addCustomEvent(new Condition("triggerhit") {
                  public boolean test() {
                        return (getEnergy() <= trigger);
                  }
            });
   public void onCustomEvent(CustomEvent e) {
            // If our custom event "triggerhit" went off,
            if (e.getCondition().getName().equals("triggerhit")) {
            }                        
```
---
# Cel #03 - TrackFire

<br/>
.big[
- http://robowiki.net/wiki/TrackFire
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/TrackFire_8java-source.html)

ten stoi i strzela, więc wycelować i strzelać...
plus uciekać jak nas namierzy i trafi


Paiting Robot - może się przydać  
[Kod](http://robocode.sourcearchive.com/documentation/1.6.2/PaintingRobot_8java-source.html)
]
???
on scan i sprawdzanie odchylenia od celu, strzal jak male i gun zimny
---
# Cel #04 - Fire 

<br/>
.big[
- http://robowiki.net/wiki/Fire
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/Fire_8java-source.html)

Strzela i ucieka...  
czy nam to robi jakąś różnice?

Robimy "prostopadłe ruchy" i lepszy radar  
http://robowiki.net/wiki/One_on_One_Radar

]
???
onHit...
obracanie sie prostopadle do...

---
# Cel #05 - Tracker 

<br/>
.big[
- http://robowiki.net/wiki/Tracker
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/Tracker_8java-source.html)

Jak wziąść konkretnego osobnika na cel?  
Może inny "win dance"?
]
???


---
# Wzorzec Strategia i Stan

<br/>
.big[
https://en.wikipedia.org/wiki/Strategy_pattern


https://en.wikipedia.org/wiki/State_pattern
]
---
# Cel #06 - Corners

<br/>
.big[
- http://robowiki.net/wiki/Corners
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/Corners_8java-source.html)


- danie miedzy rundami...
- skuteczność strategii...
- ilość przeciwników!

]
???

---
# Cel #07 - Kilku przeciwników 

<br/>
.big[
- SittingDuck
- Target
- TrackFire
- Fire
- Tracker
- Corners


wybrać 2,3,4,6?
]
---
# Cel #08 - VelociRobot

<br/>
.big[
- http://robowiki.net/wiki/VelociRobot
- MyFirstJuniorRobot
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/MyFirstJuniorRobot_8java-source.html)
- MyFirstRobot 
- http://robowiki.net/wiki/MyFirstRobot 
- http://robowiki.net/wiki/Robocode/My_First_Robot
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/MyFirstRobot_8java-source.html)
]

???
---
# Cel #09 - Crazy 

<br/>
.big[
- http://robowiki.net/wiki/Crazy
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/Crazy_8java-source.html)
]

???
waitFor(new TurnCompleteCondition(this));

---
# Cel #10 - Kilku przeciwników 

<br/>
.big[
- Crazy
- TrackFire
- SittingDuck
- Target
- TrackFire
- Fire
- Tracker
- Corners

wybrac 2,3,4,6?
]

---
# Cel #11 - SpinBot

<br/>
.big[
- http://robowiki.net/wiki/SpinBot
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/SpinBot_8java-source.html)

Nic nowego ale jak trudno trafić w coś co się kreci?
]
???

---
# Cel #12 - Walls

<br/>
.big[
- http://robowiki.net/wiki/Walls_(robot)
- [Kod](http://robocode.sourcearchive.com/documentation/1.6.2/Walls_8java-source.html)
- http://robowiki.net/wiki/Linear_Targeting
- http://robowiki.net/wiki/Maximum_Escape_Angle  

Jak już skutecznie będziemy ubijać Wall,  
SpinBot jeszcze raz
]
???
Rozmiary planszy...
            // turnLeft to face a wall.
            // getHeading() 

---
# Inne przydatnelinki

- http://robowiki.net/wiki/Mirror_Movement
- http://robowiki.net/wiki/GoTo
- http://robowiki.net/wiki/Category:Code_Snippets

---
# Co dalej?

<br/>
.big[
- Super Sample Bots
- http://robowiki.net/wiki/Super_Sample_Bots

Jak już skutecznie będziemy ubijać wszystkie Sample boty...

- Top bots 
- http://robowiki.net/wiki/Robocode/Downloading_Robots
]

---
layout:false
background-image: url(img/kl-title43.png)
class: title-slaid, center, middle
<br/><br/><br/><br/>
#.center[Koniec]
<br/><br/>
##.right[Dziękuję!]
<br/><br/><br/><br/>
.left[![:scale 10%](img/sages.png)]

    </textarea>
    <script src="js/remark-latest.min.js">
    </script>
	
    <script src="js/mermaid.min.js"></script>
    
 <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>	
	
    <script>	  
      remark.macros.scale = function (percentage) {
         var url = this;
         return '<img src="' + url + '" style="width: ' + percentage + '" />';
      };	  
	
      var slideshow = remark.create({
      // Set the slideshow display ratio
      // Default: '4:3'
      // Alternatives: '16:9', ...
      ratio: '4:3',

      // Navigation options
      navigation: {
      // Enable or disable navigating using scroll
      // Default: true
      // Alternatives: false
      scroll: false,

      // Enable or disable navigation using touch
      // Default: true
      // Alternatives: false
      touch: false,

      // Enable or disable navigation using click
      // Default: false
      // Alternatives: true
      click: false
	  },
      // Customize slide number label, either using a format string..
      slideNumberFormat: 'Slide %current% of %total%',
      // .. or by using a format function
      slideNumberFormat: function (current, total) {
      return current + '/' + total;
      },

      // Enable or disable counting of incremental slides in the slide counting
      countIncrementalSlides: true,
	  /*highlightLanguage: 'java',*/
      /*arta, ascetic, dark, default, far, github, googlecode, idea, ir_black, magula, monokai, rainbow, solarized-dark, solarized-light, sunburst, tomorrow, tomorrow-night-blue, tomorrow-night-bright, tomorrow-night, tomorrow-night-eighties, vs, zenburn */
      highlightStyle: 'magula',
	  highlightLines: true
	  });
	  
      // Setup MathJax
      MathJax.Hub.Config({
          tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
          }
      });
      MathJax.Hub.Queue(function() {
          $(MathJax.Hub.getAllJax()).map(function(index, elem) {
              return(elem.SourceElement());
          }).parent().addClass('has-jax');
      });

      MathJax.Hub.Configured();	  	  
    </script>	
    <script>mermaid.initialize({startOnLoad:true});</script>		
  </body>
</html>